use src::vec3::all
use src::ray::Ray
use src::mathx

fn hit_sphere(center: Point3, radius: f64, r: Ray)
  let oc = center - r.origin
  let a = r.direction.len_squared()
  let h = r.direction.dot(oc)
  let c = oc.len_squared() - radius * radius
  let discriminant = h * h - a * c

  if discriminant < 0.0:
    -1.0
  else:
    (h - mathx::sqrt(discriminant)) / a

pub fn main() -> i32
  let ray = Ray {
    origin: Point3(0.0, 0.0, 0.0),
    direction: Vec3(0.0, 0.0, -1.0)
  }
  let t = hit_sphere(Point3(0.0, 0.0, -1.0), 0.5, ray)
  if t > 0.0: 1 else: 0
