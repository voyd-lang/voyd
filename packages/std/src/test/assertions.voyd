//! Test assertion utilities.
//!
//! Hosts effectful assertion helpers used by std and smoke tests.

@effect(id: "std::std::test::assertions::Test")
pub eff Test
  /// Marks the current test as failed.
  fail(resume) -> void

  /// Marks the current test as skipped.
  skip(resume) -> void

  /// Emits a structured test log event.
  log(resume) -> void

/// Fails the current test when `cond` is false.
pub fn assert(cond: boolean): fail -> void
  if not cond:
    Test::fail()

/// Fails the current test when `value` is not equal to `expected`.
pub fn assert<T>(value: T, { eq expected: T }): fail -> void
  if value != expected:
    Test::fail()

/// Fails the current test when `value` is equal to `expected`.
pub fn assert<T>(value: T, { neq expected: T }): fail -> void
  if value == expected:
    Test::fail()
